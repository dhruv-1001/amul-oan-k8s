# Server-side secret creation

Create secrets on the cluster by running these scripts from a machine with `kubectl` access.

## Option 1: Environment variables

Export the required vars, then run:

```bash
# Required for all
export REGISTRY_USERNAME=...
export REGISTRY_PASSWORD=...
export LANGFUSE_DATABASE_URL="postgresql://postgres:PASSWORD@10.5.25.36:5432/langfuse"
export LANGFUSE_SALT=$(openssl rand -hex 16)
export LANGFUSE_ENCRYPTION_KEY=$(openssl rand -hex 32)
export LANGFUSE_NEXTAUTH_SECRET=$(openssl rand -hex 32)
export CLICKHOUSE_PASSWORD=...   # same as external-dbs/.env
export MINIO_ROOT_PASSWORD=...   # same as external-dbs/.env

# amul-oan-api
export AMUL_LANGFUSE_SECRET_KEY=sk-...
export AMUL_LANGFUSE_PUBLIC_KEY=pk-...
export AMUL_MEITY_API_KEY_VALUE=...
export AMUL_OPENAI_API_KEY=...
export AMUL_ANTHROPIC_API_KEY=...
export AMUL_GEMINI_API_KEY=...
export AMUL_PASHUGPT_TOKEN=...
export AMUL_PASHUGPT_TOKEN_2=...
export AMUL_PASHUGPT_TOKEN_3=...
export AMUL_APP_FE_URL=https://...

# voice-oan-api
export VOICE_SECRET_KEY=...
export VOICE_OPENAI_API_KEY=...
export VOICE_PASHUGPT_TOKEN=...
export VOICE_PASHUGPT_TOKEN_2=...
export VOICE_PASHUGPT_TOKEN_3=...
export VOICE_LANGFUSE_SECRET_KEY=sk-...
export VOICE_LANGFUSE_PUBLIC_KEY=pk-...

./create-secrets.sh
```

## Option 2: Local env file (gitignored)

Create `envs/prod/scripts/.env.secrets` with the vars above, then:

```bash
cd envs/prod/scripts
set -a && source .env.secrets && set +a
./create-secrets.sh
```

Add `.env.secrets` to `.gitignore` so it is never committed.
