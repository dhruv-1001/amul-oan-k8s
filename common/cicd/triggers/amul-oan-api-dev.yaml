apiVersion: argoproj.io/v1alpha1
kind: CronWorkflow
metadata:
  name: amul-oan-api-dev-ci
  namespace: argo
spec:
  schedule: "*/5 * * * *"
  timezone: "Asia/Kolkata"
  concurrencyPolicy: "Forbid"
  workflowSpec:
    serviceAccountName: ci-builder
    workflowTemplateRef:
      name: build-with-kaniko
    arguments:
      parameters:
        - name: repo_url
          value: "https://github.com/amulmitra/amul-oan-api.git"
        - name: branch
          value: "dev"
        - name: image_name
          value: "amul-oan-api"
        - name: registry_url
          value: "dev-amulmitra.amul.com:5000"
        - name: tag_strategy
          value: "branch"
